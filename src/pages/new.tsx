import { useState } from 'react'; export default function New(){ const [form,setForm]=useState<any>({}); const [created,setCreated]=useState<any>(null); const onChange=(e:any)=>setForm({...form,[e.target.name]:e.target.value}); const onSubmit=async(e:any)=>{e.preventDefault(); const customer={id:form.shopify_customer_id||null,name:form.customer_name||null,phone:form.customer_phone||null,email:form.customer_email||null}; const r=await fetch('/api/trades',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({customer,sortswift_order_no:form.sortswift_order_no||null,est_item_count:form.est_item_count?Number(form.est_item_count):null,notes:form.notes||null,staff_checkin:form.staff_checkin||null})}).then(r=>r.json()); setCreated(r.trade); }; return (<div style={{padding:20}}><h1>New Intake</h1>{!created?(<form onSubmit={onSubmit}><input name='customer_name' placeholder='Customer name' onChange={onChange}/><br/><input name='customer_phone' placeholder='Phone' onChange={onChange}/><br/><input name='customer_email' placeholder='Email' onChange={onChange}/><br/><input name='sortswift_order_no' placeholder='SortSwift #' onChange={onChange}/><br/><input name='est_item_count' placeholder='Rough item count' onChange={onChange}/><br/><input name='staff_checkin' placeholder='Staff initials' onChange={onChange}/><br/><button>Create Intake</button></form>):(<div>Created: {created.intake_id} Â· <a href={`/t/${created.qr_slug}`}>Open Ticket</a></div>)}</div>); }
